jQuery(document).ready(function(i){var t='<tr valign="top" class=""><th scope="row" class="titledesc">'+wcwl_settings.update_counts_desc+'</th><td class="forminp forminp-checkbox"><fieldset><legend class="screen-reader-text"><span>'+wcwl_settings.update_counts_desc+'</span></legend><button name="woocommerce_waitlist_update_counts" id="woocommerce_waitlist_update_counts" type="button" class="button">'+wcwl_settings.update_counts_button_text+'</button><span class="wcwl_settings_update_counts_text">'+wcwl_settings.update_warning+"</span></fieldset></td></tr>",e='<tr valign="top" class=""><th scope="row" class="titledesc">'+wcwl_settings.update_meta_desc+'</th><td class="forminp forminp-checkbox"><fieldset><legend class="screen-reader-text"><span>'+wcwl_settings.update_meta_desc+'</span></legend><button name="woocommerce_waitlist_update_meta" id="woocommerce_waitlist_update_meta" type="button" class="button">'+wcwl_settings.update_meta_button_text+'</button><span class="wcwl_settings_update_meta_text">'+wcwl_settings.update_warning+"</span></fieldset></td></tr>",s='<tr valign="top" class=""><th scope="row" class="titledesc">'+wcwl_settings.export_desc+'</th><td class="forminp forminp-checkbox"><fieldset><legend class="screen-reader-text"><span>'+wcwl_settings.export_desc+'</span></legend><button name="woocommerce_waitlist_export" id="woocommerce_waitlist_export" type="button" class="button">'+wcwl_settings.export_button_text+'</button><span class="wcwl_settings_export_text">'+wcwl_settings.export_text+"</span></fieldset></td></tr>",n=i('h2:contains("Waitlist Update Options")').next("table"),e=(i(e).prependTo(n),i(t).prependTo(n),i(".form-table").show(),i("#woocommerce_waitlist_update_counts").click(function(){{var t;window.confirm(wcwl_settings.confirmation_message)&&(_="count",t={action:"wcwl_get_products",wcwl_get_products:wcwl_settings.get_products_nonce},i.post(ajaxurl,t,function(t){var n,c,o;0<(products=t.data).length?(r(1,products.length),n=products,c=n.length,o=0,function t(){var e,s;0<n.length&&(s={action:"wcwl_update_counts",products:e=n.splice(0,10),wcwl_update_counts:wcwl_settings.update_counts_nonce,remaining:n.length},i.post(ajaxurl,s,function(t){(o=parseInt(e.length)+parseInt(o))==c?p(c):l(o)}).done(function(){t()}))}()):alert(wcwl_settings.no_products_message)}))}}),i("#woocommerce_waitlist_update_meta").click(function(){{var t;window.confirm(wcwl_settings.confirmation_message)&&(_="meta",t={action:"wcwl_get_products",wcwl_get_products:wcwl_settings.get_products_nonce},i.post(ajaxurl,t,function(t){var n,c,o;0<(products=t.data).length?(r(1,products.length),n=products,c=n.length,o=0,function t(){var e,s;0<n.length&&(s={action:"wcwl_update_meta",products:e=n.splice(0,10),wcwl_update_meta:wcwl_settings.update_meta_nonce,remaining:n.length},i.post(ajaxurl,s,function(t){(o=parseInt(e.length)+parseInt(o))==c?p(c):l(o)}).done(function(){t()}))}()):alert("No products found.")}))}}),i('h2:contains("Waitlist Admin Options")').next("table")),c=(i(s).appendTo(e),i("#woocommerce_waitlist_export").click(function(){w(),i('<span class="spinner is-active" style="float:none;"></span>').insertAfter("#woocommerce_waitlist_export");var t={action:"wcwl_get_products_with_waitlist_or_archive",wcwl_get_products:wcwl_settings.get_products_nonce};i.post(ajaxurl,t,function(t){var n,c,o,a;0<(products="object"==typeof(products=t.data)?Object.values(products):products).length?(n=products,c=n.length,o=0,a=wcwl_settings.csv_export_header+"\r\n",function t(){var s,e;0<n.length&&(e={action:"wcwl_generate_csv",products:s=n.splice(0,10),nonce:wcwl_settings.export_nonce},i.post(ajaxurl,e,function(t){var e;a+=t.data,(o=parseInt(s.length)+parseInt(o))==c&&((t=document.createElement("a")).setAttribute("type","hidden"),e=encodeURI(a),t.setAttribute("href",e),t.setAttribute("download","waitlist-export.csv"),document.body.appendChild(t),t.click(),i(".spinner.is-active").remove(),u())}).done(function(){t()}))}()):(i(".spinner.is-active").remove(),u(),alert("No products found."))})}),i("#woocommerce_waitlist_create_account")),o=c.closest("tr").next("tr");function a(){c.is(":checked")?o.show():o.hide()}c.click(function(){a()}),a();var _="";function r(t,e){w();var s="",s=("count"===_&&(s=wcwl_settings.update_counts_message),'<div id="message" class="updated inline"><p><strong>'+(s="meta"===_?wcwl_settings.update_meta_message:s)+"</strong></p></div>");i(s).insertBefore(n),i(".wcwl_current_update").text(t),i(".wcwl_total_updates").text(e)}function l(t){i(".wcwl_current_update").text(t)}function p(t){var e="";"count"===_&&(e=wcwl_settings.update_counts_message_complete),"meta"===_&&(e=wcwl_settings.update_meta_message_complete),i("#message p strong").html(e),i(".wcwl_total_updates").text(t),u()}function w(){i("#woocommerce_waitlist_update_counts, #woocommerce_waitlist_update_meta, #woocommerce_waitlist_export, .woocommerce-save-button").prop("disabled",!0)}function u(){i("#woocommerce_waitlist_update_counts, #woocommerce_waitlist_update_meta, #woocommerce_waitlist_export, .woocommerce-save-button").prop("disabled",!1)}});